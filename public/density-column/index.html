<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <script src="http://d3js.org/d3.v2.min.js?2.10.0"></script>
    <!-- for c9.io dev --> <script type="text/javascript" src="../d3.v2.js" charset="utf-8" ></script>
    <script type="text/javascript" src="density-column.js"></script>
<style>


.positive {
  fill: steelblue;
  stroke: steelblue;
  stroke-width: 1px;
  stroke-opacity: .5;
  shape-rendering: crispEdges;
}

.negative {
  fill: brown;
  stroke: brown;
  stroke-width: 1px;
  stroke-opacity: .5;
  shape-rendering: crispEdges;
}

line.positive {
  stroke: steelblue;
}

line.negative {
  stroke: brown;
}


.axis text {
  font: 10px sans-serif;
}

.axis path, .axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.zero path {
  fill: none;
  stroke: lightgray;
  shape-rendering: crispEdges;
}

line.totalror {
  fill: none;
  stroke: #000;
  stroke-width: 1px;
  shape-rendering: crispEdges;
}

</style>
  
  </head>
  <body>
  <div id="example"></div>

  
<script>

function myCallback(spreadsheetdata) {
  // do something with spreadsheet data here

  var formatDate = d3.time.format("%b %Y"),
    data1 = [],
    totalror;
    
    
  for (var i = 0; i < spreadsheetdata.feed.entry.length; i++) {
      var entry = spreadsheetdata.feed.entry[i];
      var row = {};
      row.inv = entry.gsx$investment.$t;
      row.ror = entry.gsx$return.$t;
      row.allocation = entry.gsx$allocation.$t;
      totalror = entry.gsx$totalreturn.$t;
      data1[i] = row;
  };

  d3.select("#example")
      .datum(data1)
    .call(columnChart()
      .width(960)
      .height(500)
      .x(function(d) { return d.inv; })
      .y(function(d) { return +d.ror; })
      .allocation(function(d) { return +d.allocation; })
      .totalror(+totalror)
      .yTickFormat("p"));
};

</script>

  
<script src="https://spreadsheets.google.com/feeds/list/0Agxrt1aeoXHOdFlWbl9tQm12cWRlRWdMVFY0bER4c2c/od6/public/values?alt=json-in-script&callback=myCallback"></script>




  </body>
</html>